<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>Contrato de Prestação de Serviços – Kings Agência</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!-- Signature Pad -->
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <main class="page">
    <section class="container">
      <div class="contract-wrapper">
        <div class="contract-box" id="contractBox">
          <div class="contract-content">
            <div class="contract-header">
              <h2>CONTRATO DE PRESTAÇÃO DE SERVIÇOS – KINGS AGÊNCIA</h2>
            </div>
            
            <div class="contract-section">
              <h3>PARTES:</h3>
              <p>De um lado, <strong>KINGS AGÊNCIA</strong>, inscrito no CPF nº 145.998.009-37, prestando serviços de forma online, doravante denominado <strong>CONTRATADO</strong>;</p>
              <p>E de outro, <strong>[Nome do Cliente]</strong>, inscrito no CPF nº [●], doravante denominado <strong>CONTRATANTE</strong>.</p>
            </div>

            <div class="contract-section">
              <h3>CLÁUSULA 1 – OBJETO</h3>
              <p><strong>1.1</strong> O presente contrato tem por objeto a prestação de serviços pelo CONTRATADO ao CONTRATANTE, podendo incluir:</p>
              <ul>
                <li>Criação, desenvolvimento e manutenção de sites;</li>
                <li>Hospedagem e suporte técnico;</li>
                <li>Marketing digital, design e outras soluções acordadas.</li>
              </ul>
              <p><strong>1.2</strong> O site será desenvolvido de acordo com a escolha e informações fornecidas pelo CONTRATANTE no início do projeto, garantindo que o valor contratado cobre a entrega conforme esse combinado.</p>
              <p><strong>1.3</strong> Caso o CONTRATANTE solicite alterações ou modificações fora do que foi inicialmente combinado, será cobrada uma taxa adicional de 30% do valor original do contrato, previamente acordada entre as partes.</p>
            </div>

            <div class="contract-section">
              <h3>CLÁUSULA 2 – PRAZO</h3>
              <p><strong>2.1</strong> O prazo para entrega dos serviços será definido em cronograma acordado entre as partes.</p>
            </div>

            <div class="contract-section">
              <h3>CLÁUSULA 3 – VALOR E PAGAMENTO</h3>
              <p><strong>3.1</strong> O CONTRATANTE pagará ao CONTRATADO o valor total de [VALOR_CONTRATO], que deverá ser pago inteiramente no momento da finalização e entrega do site.</p>
              <p><strong>3.2</strong> A mensalidade referente á (hospedagem/manutenção) será paga todo dia [DIA_PAGAMENTO] de cada mês.</p>
              <p><strong>3.3</strong> Os valores poderão ser reajustados ou alterados, mediante aviso prévio de 30 (trinta) dias ao CONTRATANTE.</p>
              <p><strong>3.4</strong> O valor do contrato não será reajustado continuamente; somente poderá haver cobrança adicional em caso de alterações solicitadas pelo CONTRATANTE, conforme Cláusula 1.3.</p>
            </div>

            <div class="contract-section">
              <h3>CLÁUSULA 4 – OBRIGAÇÕES DO CONTRATADO</h3>
              <ul>
                <li>Entregar os serviços contratados dentro do prazo estabelecido;</li>
                <li>Garantir a confidencialidade das informações do CONTRATANTE;</li>
                <li>Prestar suporte técnico conforme acordado.</li>
              </ul>
            </div>

            <div class="contract-section">
              <h3>CLÁUSULA 5 – OBRIGAÇÕES DO CONTRATANTE</h3>
              <ul>
                <li>Fornecer informações, conteúdos e materiais necessários para execução dos serviços;</li>
                <li>Efetuar os pagamentos nas datas ajustadas;</li>
                <li>Respeitar os prazos de aprovação e feedback.</li>
              </ul>
            </div>

            <div class="contract-section">
              <h3>CLÁUSULA 6 – RESCISÃO</h3>
              <p><strong>6.1</strong> O presente contrato poderá ser rescindido por qualquer das partes mediante aviso prévio de 30 (trinta) dias.</p>
              <p><strong>6.2</strong> Em caso de inadimplência, o CONTRATADO poderá suspender os serviços.</p>
            </div>

            <div class="contract-section">
              <h3>CLÁUSULA 7 – FORO</h3>
              <p>Fica eleito o foro da comarca de Itajaí/SC, com renúncia a qualquer outro, para dirimir quaisquer dúvidas decorrentes deste contrato.</p>
            </div>

            <div class="contract-section">
              <p>[Local], [Data].</p>
            </div>

            <div class="contract-signature">
              <div class="signature-box">
                <div class="signature-image">
                  <img src="assets/signatures/kings-signature.png" alt="Assinatura Kings Agência" class="kings-signature">
                </div>
                <p><strong>Kings Agência</strong> – CONTRATADO</p>
              </div>
              
              <div class="signature-box">
                <div class="signature-line"></div>
                <p><strong>[Cliente]</strong> – CONTRATANTE</p>
              </div>
            </div>

            <div class="contract-section">
              <h3>TERMOS DE USO – SITE KINGS AGÊNCIA</h3>
              
              <p><strong>1. ACEITAÇÃO DOS TERMOS</strong></p>
              <p>Ao acessar e utilizar o site da Kings Agência, o usuário declara estar ciente e de acordo com as regras aqui estabelecidas.</p>
              
              <p><strong>2. SERVIÇOS OFERECIDOS</strong></p>
              <p>O site pode disponibilizar informações sobre serviços de marketing digital, criação de sites, design e demais soluções.</p>
              
              <p><strong>3. RESPONSABILIDADE DO USUÁRIO</strong></p>
              <ul>
                <li>Utilizar o site de forma legal e ética;</li>
                <li>Não tentar invadir, copiar ou alterar o sistema;</li>
                <li>Fornecer dados verdadeiros em formulários de contato.</li>
              </ul>
              
              <p><strong>4. RESPONSABILIDADE DA KINGS AGÊNCIA</strong></p>
              <ul>
                <li>Manter o site disponível, salvo em casos de manutenção ou força maior;</li>
                <li>Proteger os dados pessoais fornecidos, conforme a LGPD (Lei Geral de Proteção de Dados).</li>
              </ul>
              
              <p><strong>5. PROPRIEDADE INTELECTUAL</strong></p>
              <p>Todo o conteúdo do site (textos, imagens, logotipos e materiais) pertence à Kings Agência e não pode ser reproduzido sem autorização.</p>
              
              <p><strong>6. PRIVACIDADE</strong></p>
              <p>As informações coletadas serão utilizadas exclusivamente para contato e envio de propostas. Não compartilhamos dados com terceiros sem autorização.</p>
              
              <p><strong>7. ALTERAÇÕES</strong></p>
              <p>A Kings Agência poderá atualizar estes Termos a qualquer momento, sendo responsabilidade do usuário consultar regularmente.</p>
              
              <p><strong>8. FORO</strong></p>
              <p>Fica eleito o foro da comarca de Itajaí/SC, para dirimir quaisquer conflitos decorrentes do uso do site.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Seção de Assinatura -->
      <div class="signature-section">
        <h3>Assinatura Digital</h3>
        <p>Assine digitalmente o contrato abaixo:</p>
        
        <div class="signature-pad-container">
          <canvas id="signaturePad" width="400" height="200"></canvas>
          <div class="signature-actions">
            <button type="button" id="clearSignature" class="btn btn-clear" disabled>Limpar Assinatura</button>
          </div>
        </div>
      </div>

      <!-- Botões de Ação -->
      <div class="contract-actions">
        <button type="button" id="downloadPdfBtn" class="btn btn-success" style="display: none;">Baixar PDF</button>
        <button type="button" id="submitContract" class="btn btn-primary">Enviar e Baixar PDF</button>
      </div>
    </section>
  </main>

  <!-- Modal de assinatura em tela cheia -->
  <div id="signatureFullscreen" class="sigfs hidden" aria-hidden="true">
    <div class="sigfs-toolbar">
      <div class="sigfs-content">
        <div class="sigfs-title">Assinatura</div>
        <div class="sigfs-actions">
          <button type="button" class="btn btn-ghost" id="fsClear">Limpar</button>
          <button type="button" class="btn" id="fsClose">Concluir</button>
        </div>
      </div>
    </div>
    <div class="sigfs-canvas-wrap" id="sigfsWrap">
      <canvas id="signatureCanvasFS"></canvas>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="script.js"></script>
  <script>
    // Carregar dados do contrato se houver parâmetro na URL
    document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const contractId = urlParams.get('contract');
      
      if (contractId) {
        // Carregar dados do localStorage
        const contracts = JSON.parse(localStorage.getItem('contracts') || '[]');
        const contract = contracts.find(c => c.id === contractId);
        
        if (contract) {
          // Verificar se o contrato já foi assinado
          if (contract.status === 'signed') {
            // Contrato já assinado - desabilitar formulário
            disableForm();
          } else {
            // Contrato pendente - permitir assinatura
            enableForm(contract);
          }
          // Atualizar o contrato no texto com os dados do cliente
          updateContractContent(contract);
        } else {
          // Contrato não encontrado
          showContractNotFoundMessage();
        }
      }
    });





    function showContractNotFoundMessage() {
      // Criar mensagem de contrato não encontrado
      const notFoundDiv = document.createElement('div');
      notFoundDiv.style.cssText = `
        background: #fee2e2;
        color: #991b1b;
        padding: 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-size: 1rem;
        border: 1px solid #f87171;
        text-align: center;
      `;
      notFoundDiv.innerHTML = `
        <div style="font-size: 2rem; margin-bottom: 8px;">❌</div>
        <strong>Contrato não encontrado!</strong><br>
        <span style="font-size: 0.9rem; opacity: 0.8;">
          O link do contrato é inválido ou expirou.
        </span>
      `;
      
      // Substituir o formulário pela mensagem
      const form = document.getElementById('contractForm');
      form.parentNode.insertBefore(notFoundDiv, form);
      form.style.display = 'none';
    }

    function updateContractContent(contract) {
      // Atualizar o contrato no texto com os dados do cliente
      const contractContent = document.querySelector('.contract-content');
      let content = contractContent.innerHTML;
      

      
      // Substituir placeholders pelos dados reais
      content = content.replace(/\[Nome do Cliente\]/g, contract.clientName || '[Nome do Cliente]');
      content = content.replace(/\[●\]/g, contract.clientDoc || '[●]');
      content = content.replace(/\[Local\]/g, 'Itajaí/SC');
      
      // Usar a data de pagamento do contrato em vez da data atual
      let dataContrato = new Date().toLocaleDateString('pt-BR'); // valor padrão
      if (contract.paymentDate) {
        // Formatar a data diretamente da string (formato YYYY-MM-DD)
        const partes = contract.paymentDate.split('-');
        if (partes.length === 3) {
          const ano = partes[0];
          const mes = partes[1];
          const dia = partes[2];
          dataContrato = `${dia}/${mes}/${ano}`;
        }
      }
      content = content.replace(/\[Data\]/g, dataContrato);
      
      content = content.replace(/\[Cliente\]/g, contract.clientName || '[Cliente]');
      
      // Substituir dia de pagamento
      let diaPagamento = '15'; // valor padrão
      
      if (contract.paymentDate) {
        // Extrair o dia diretamente da string da data (formato YYYY-MM-DD)
        const partes = contract.paymentDate.split('-');
        if (partes.length === 3) {
          diaPagamento = partes[2]; // O dia está na terceira posição
        }
      }
      
      content = content.replace(/\[DIA_PAGAMENTO\]/g, diaPagamento);
      
      // Substituir valor do contrato
      const valorContrato = contract.contractValue || 'R$ 0,00';
      content = content.replace(/\[VALOR_CONTRATO\]/g, valorContrato);
      

      
      contractContent.innerHTML = content;
    }




  </script>
</body>
</html>


