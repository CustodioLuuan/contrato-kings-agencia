<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <title>Contrato de Presta√ß√£o de Servi√ßos ‚Äì Kings Ag√™ncia</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!-- Signature Pad -->
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <main class="page">
    <section class="container">
      <h1 class="title">üìÑ Contrato de Presta√ß√£o de Servi√ßos ‚Äì Kings Ag√™ncia</h1>

      <div class="contract-wrapper">
        <div class="contract-box" id="contractBox">
          <div class="contract-content">
            <div class="contract-header">
              <h2>üìÑ CONTRATO DE PRESTA√á√ÉO DE SERVI√áOS ‚Äì KINGS AG√äNCIA</h2>
            </div>

            <div class="contract-section">
              <h3>PARTES:</h3>
              <p>De um lado, <strong>KINGS AG√äNCIA</strong>, inscrito no CPF n¬∫ 145.998.009-37, prestando servi√ßos de forma online, doravante denominado <strong>CONTRATADO</strong>;</p>
              <p>E de outro, <strong>[Nome do Cliente]</strong>, inscrito no CPF n¬∫ [‚óè], doravante denominado <strong>CONTRATANTE</strong>.</p>
            </div>

            <div class="contract-section">
              <h3>CL√ÅUSULA 1 ‚Äì OBJETO</h3>
              <p><strong>1.1</strong> O presente contrato tem por objeto a presta√ß√£o de servi√ßos pelo CONTRATADO ao CONTRATANTE, podendo incluir:</p>
              <ul>
                <li>Cria√ß√£o, desenvolvimento e manuten√ß√£o de sites;</li>
                <li>Hospedagem e suporte t√©cnico;</li>
                <li>Marketing digital, design e outras solu√ß√µes acordadas.</li>
              </ul>
              <p><strong>1.2</strong> O site ser√° desenvolvido de acordo com a escolha e informa√ß√µes fornecidas pelo CONTRATANTE no in√≠cio do projeto, garantindo que o valor contratado cobre a entrega conforme esse combinado.</p>
              <p><strong>1.3</strong> Caso o CONTRATANTE solicite altera√ß√µes ou modifica√ß√µes fora do que foi inicialmente combinado, ser√° cobrada uma taxa adicional de 30% do valor original do contrato, previamente acordada entre as partes.</p>
            </div>

            <div class="contract-section">
              <h3>CL√ÅUSULA 2 ‚Äì PRAZO</h3>
              <p><strong>2.1</strong> O prazo para entrega dos servi√ßos ser√° definido em cronograma acordado entre as partes.</p>
            </div>

            <div class="contract-section">
              <h3>CL√ÅUSULA 3 ‚Äì VALOR E PAGAMENTO</h3>
              <p><strong>3.1</strong> O CONTRATANTE pagar√° ao CONTRATADO o valor de <strong>R$ [‚óè]</strong>, conforme condi√ß√µes: [ex.: 30% na assinatura e 70% na entrega].</p>
              <p><strong>3.2</strong> Em caso de mensalidade (hospedagem/manuten√ß√£o), o pagamento ocorrer√° todo dia [‚óè] de cada m√™s.</p>
              <p><strong>3.3</strong> Os valores poder√£o ser reajustados ou alterados, mediante aviso pr√©vio de 30 (trinta) dias ao CONTRATANTE.</p>
              <p><strong>3.4</strong> O valor do contrato n√£o ser√° reajustado continuamente; somente poder√° haver cobran√ßa adicional em caso de altera√ß√µes solicitadas pelo CONTRATANTE, conforme Cl√°usula 1.3.</p>
            </div>

            <div class="contract-section">
              <h3>CL√ÅUSULA 4 ‚Äì OBRIGA√á√ïES DO CONTRATADO</h3>
              <ul>
                <li>Entregar os servi√ßos contratados dentro do prazo estabelecido;</li>
                <li>Garantir a confidencialidade das informa√ß√µes do CONTRATANTE;</li>
                <li>Prestar suporte t√©cnico conforme acordado.</li>
              </ul>
            </div>

            <div class="contract-section">
              <h3>CL√ÅUSULA 5 ‚Äì OBRIGA√á√ïES DO CONTRATANTE</h3>
              <ul>
                <li>Fornecer informa√ß√µes, conte√∫dos e materiais necess√°rios para execu√ß√£o dos servi√ßos;</li>
                <li>Efetuar os pagamentos nas datas ajustadas;</li>
                <li>Respeitar os prazos de aprova√ß√£o e feedback.</li>
              </ul>
            </div>

            <div class="contract-section">
              <h3>CL√ÅUSULA 6 ‚Äì RESCIS√ÉO</h3>
              <p><strong>6.1</strong> O presente contrato poder√° ser rescindido por qualquer das partes mediante aviso pr√©vio de 30 dias.</p>
              <p><strong>6.2</strong> Em caso de inadimpl√™ncia, o CONTRATADO poder√° suspender os servi√ßos.</p>
            </div>

            <div class="contract-section">
              <h3>CL√ÅUSULA 7 ‚Äì FORO</h3>
              <p>Fica eleito o foro da comarca de <strong>Itaja√≠/SC</strong>, com ren√∫ncia a qualquer outro, para dirimir quaisquer d√∫vidas decorrentes deste contrato.</p>
            </div>

            <div class="contract-signature">
              <p><strong>[Local]</strong>, <strong>[Data]</strong>.</p>
              <br>
              <p><strong>Kings Ag√™ncia</strong> ‚Äì CONTRATADO</p>
              <br>
              <p><strong>[Cliente]</strong> ‚Äì CONTRATANTE</p>
            </div>

            <div class="contract-section">
              <h3>üìÑ TERMOS DE USO ‚Äì SITE KINGS AG√äNCIA</h3>
              
              <h4>1. ACEITA√á√ÉO DOS TERMOS</h4>
              <p>Ao acessar e utilizar o site da Kings Ag√™ncia, o usu√°rio declara estar ciente e de acordo com as regras aqui estabelecidas.</p>
              
              <h4>2. SERVI√áOS OFERECIDOS</h4>
              <p>O site pode disponibilizar informa√ß√µes sobre servi√ßos de marketing digital, cria√ß√£o de sites, design e demais solu√ß√µes.</p>
              
              <h4>3. RESPONSABILIDADE DO USU√ÅRIO</h4>
              <ul>
                <li>Utilizar o site de forma legal e √©tica;</li>
                <li>N√£o tentar invadir, copiar ou alterar o sistema;</li>
                <li>Fornecer dados verdadeiros em formul√°rios de contato.</li>
              </ul>
              
              <h4>4. RESPONSABILIDADE DA KINGS AG√äNCIA</h4>
              <ul>
                <li>Manter o site dispon√≠vel, salvo em casos de manuten√ß√£o ou for√ßa maior;</li>
                <li>Proteger os dados pessoais fornecidos, conforme a LGPD (Lei Geral de Prote√ß√£o de Dados).</li>
              </ul>
              
              <h4>5. PROPRIEDADE INTELECTUAL</h4>
              <p>Todo o conte√∫do do site (textos, imagens, logotipos e materiais) pertence √† Kings Ag√™ncia e n√£o pode ser reproduzido sem autoriza√ß√£o.</p>
              
              <h4>6. PRIVACIDADE</h4>
              <p>As informa√ß√µes coletadas ser√£o utilizadas exclusivamente para contato e envio de propostas. N√£o compartilhamos dados com terceiros sem autoriza√ß√£o.</p>
              
              <h4>7. ALTERA√á√ïES</h4>
              <p>A Kings Ag√™ncia poder√° atualizar estes Termos a qualquer momento, sendo responsabilidade do usu√°rio consultar regularmente.</p>
              
              <h4>8. FORO</h4>
              <p>Fica eleito o foro da comarca de <strong>Itaja√≠/SC</strong>, para dirimir quaisquer conflitos decorrentes do uso do site.</p>
            </div>
          </div>
          </div>
        </div>
      </div>

      <form class="form" id="contractForm" novalidate>
        <div class="form-grid">
          <div class="form-field">
            <label for="nome">Nome completo</label>
            <input type="text" id="nome" name="nome" placeholder="Seu nome completo" required />
            <small class="error" data-for="nome"></small>
          </div>
          <div class="form-field">
            <label>Documento</label>
            <div class="doc-type">
              <label class="radio"><input type="radio" name="docType" value="CPF" checked /> CPF</label>
              <label class="radio"><input type="radio" name="docType" value="CNPJ" /> CNPJ</label>
            </div>
          </div>
          <div class="form-field">
            <label for="doc" id="docLabel">CPF</label>
            <input type="text" id="doc" name="doc" placeholder="000.000.000-00" required />
            <small class="error" data-for="doc"></small>
          </div>
          <div class="form-field">
            <label for="email">E-mail</label>
            <input type="email" id="email" name="email" placeholder="seuemail@exemplo.com" required />
            <small class="error" data-for="email"></small>
          </div>
          <div class="form-field full">
            <label for="endereco">Endere√ßo</label>
            <input type="text" id="endereco" name="endereco" placeholder="Rua, n√∫mero, bairro, cidade - UF" required />
            <small class="error" data-for="endereco"></small>
          </div>
        </div>

        <div class="signature-section">
          <label>Assinatura digital</label>
          <div class="signature-pad">
            <canvas id="signatureCanvas"></canvas>
          </div>
          <div class="signature-actions">
            <button type="button" class="btn btn-ghost" id="clearSignature">Limpar assinatura</button>
            <button type="button" class="btn" id="openSignatureFullscreen">Tela cheia</button>
          </div>
          <small class="error" data-for="signature"></small>
        </div>

        <div class="check">
          <input type="checkbox" id="aceite" required />
          <label for="aceite">Li e aceito os termos do contrato</label>
        </div>
        <small class="error" data-for="aceite"></small>

        <div class="actions">
          <button type="submit" class="btn" id="submitBtn">Enviar e Baixar PDF</button>
        </div>
      </form>
    </section>
  </main>

  <!-- Modal de assinatura em tela cheia -->
  <div id="signatureFullscreen" class="sigfs hidden" aria-hidden="true">
    <div class="sigfs-toolbar">
      <div class="sigfs-content">
        <div class="sigfs-title">Assinatura</div>
        <div class="sigfs-actions">
          <button type="button" class="btn btn-ghost" id="fsClear">Limpar</button>
          <button type="button" class="btn" id="fsClose">Concluir</button>
        </div>
      </div>
    </div>
    <div class="sigfs-canvas-wrap" id="sigfsWrap">
      <canvas id="signatureCanvasFS"></canvas>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="script.js"></script>
  <script>
    // Carregar dados do contrato se houver par√¢metro na URL
    document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const contractId = urlParams.get('contract');
      
      if (contractId) {
        // Carregar dados do localStorage
        const contracts = JSON.parse(localStorage.getItem('contracts') || '[]');
        const contract = contracts.find(c => c.id === contractId);
        
        if (contract) {
          // Verificar se o contrato j√° foi assinado
          if (contract.status === 'signed') {
            // Contrato j√° assinado - mostrar mensagem e desabilitar formul√°rio
            showContractSignedMessage(contract);
            disableForm();
          } else {
            // Contrato pendente - permitir assinatura
            showContractPendingMessage(contract);
            enableForm(contract);
          }
        } else {
          // Contrato n√£o encontrado
          showContractNotFoundMessage();
        }
      }
    });

    function showContractSignedMessage(contract) {
      // Criar mensagem de contrato j√° assinado
      const signedDiv = document.createElement('div');
      signedDiv.style.cssText = `
        background: #fef3c7;
        color: #92400e;
        padding: 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-size: 1rem;
        border: 1px solid #fbbf24;
        text-align: center;
      `;
      signedDiv.innerHTML = `
        <div style="font-size: 2rem; margin-bottom: 8px;">‚úÖ</div>
        <strong>Contrato j√° foi assinado!</strong><br>
        <span style="font-size: 0.9rem; opacity: 0.8;">
          Este contrato foi assinado em ${new Date(contract.signedAt).toLocaleDateString('pt-BR')} √†s ${new Date(contract.signedAt).toLocaleTimeString('pt-BR')}
        </span>
      `;
      
      // Substituir o formul√°rio pela mensagem
      const form = document.getElementById('contractForm');
      form.parentNode.insertBefore(signedDiv, form);
      form.style.display = 'none';
      
      // Atualizar o contrato no texto com os dados do cliente
      updateContractContent(contract);
    }

    function showContractPendingMessage(contract) {
      // Criar mensagem de contrato pendente
      const pendingDiv = document.createElement('div');
      pendingDiv.style.cssText = `
        background: #d1fae5;
        color: #065f46;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 16px;
        font-size: 0.9rem;
        border: 1px solid #a7f3d0;
      `;
      pendingDiv.innerHTML = `
        <strong>Contrato pr√©-preenchido</strong><br>
        Os dados foram carregados automaticamente. Voc√™ pode prosseguir com a assinatura.
      `;
      
      document.querySelector('.container').insertBefore(pendingDiv, document.querySelector('.contract-wrapper'));
      
      // Atualizar o contrato no texto com os dados do cliente
      updateContractContent(contract);
    }

    function showContractNotFoundMessage() {
      // Criar mensagem de contrato n√£o encontrado
      const notFoundDiv = document.createElement('div');
      notFoundDiv.style.cssText = `
        background: #fee2e2;
        color: #991b1b;
        padding: 16px;
        border-radius: 8px;
        margin-bottom: 20px;
        font-size: 1rem;
        border: 1px solid #f87171;
        text-align: center;
      `;
      notFoundDiv.innerHTML = `
        <div style="font-size: 2rem; margin-bottom: 8px;">‚ùå</div>
        <strong>Contrato n√£o encontrado!</strong><br>
        <span style="font-size: 0.9rem; opacity: 0.8;">
          O link do contrato √© inv√°lido ou expirou.
        </span>
      `;
      
      // Substituir o formul√°rio pela mensagem
      const form = document.getElementById('contractForm');
      form.parentNode.insertBefore(notFoundDiv, form);
      form.style.display = 'none';
    }

    function updateContractContent(contract) {
      // Atualizar o contrato no texto com os dados do cliente
      const contractContent = document.querySelector('.contract-content');
      let contractText = contractContent.textContent;
      
      // Substituir placeholders pelos dados reais
      contractText = contractText.replace('[Nome do Cliente]', contract.clientName);
      contractText = contractText.replace('[‚óè]', contract.clientDoc);
      contractText = contractText.replace('R$ [‚óè]', contract.contractValue);
      contractText = contractText.replace('[ex.: 30% na assinatura e 70% na entrega]', contract.paymentTerms || '30% na assinatura e 70% na entrega');
      contractText = contractText.replace('[‚óè] de cada m√™s', '15 de cada m√™s');
      contractText = contractText.replace('[Local], [Data].', `${contract.clientAddress.split(',')[0] || 'Itaja√≠'}, ${new Date().toLocaleDateString('pt-BR')}.`);
      contractText = contractText.replace('[Cliente]', contract.clientName);
      
      contractContent.textContent = contractText;
    }

    function enableForm(contract) {
      // Preencher formul√°rio com dados do contrato
      document.getElementById('nome').value = contract.clientName;
      document.getElementById('email').value = contract.clientEmail;
      document.getElementById('doc').value = contract.clientDoc;
      document.getElementById('endereco').value = contract.clientAddress;
      
      // Marcar campos como readonly para evitar edi√ß√£o
      document.getElementById('nome').readOnly = true;
      document.getElementById('email').readOnly = true;
      document.getElementById('doc').readOnly = true;
      document.getElementById('endereco').readOnly = true;
      
      // Adicionar classe visual para indicar que est√° preenchido
      document.getElementById('nome').classList.add('pre-filled');
      document.getElementById('email').classList.add('pre-filled');
      document.getElementById('doc').classList.add('pre-filled');
      document.getElementById('endereco').classList.add('pre-filled');
    }

    function disableForm() {
      // O formul√°rio j√° est√° escondido pela fun√ß√£o showContractSignedMessage
      // Esta fun√ß√£o pode ser expandida se necess√°rio no futuro
    }
  </script>
</body>
</html>


